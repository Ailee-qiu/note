## json-server

[『前端必备』本地数据接口 —— json-server 从入门到膨胀 - 掘金 (juejin.cn)](https://juejin.cn/post/7043424909472563208)

[json-server从入门开始 - 掘金 (juejin.cn)](https://juejin.cn/post/7288501749530968124)

[json-server - npm (npmjs.com)](https://www.npmjs.com/package/json-server)

>**1. node 环境安装**
>
>**2. 安装 json-server**
>
>npm install -g json-server
>
>**3. 创建数据库**
>
>在你本机创建一个文件夹，然后新建一个 `json` 文件，再填入数据即可。建议文件名中不要出现中文。
>
>**4. 启动服务**
>
>进入 `json-server-demo` 目录，打开终端输入以下命令即可
>
>json-server --watch db.json
>
>- `json-server`: 这是 JSON Server 工具的启动命令。
>- `--watch`: 这个选项告诉 JSON Server 监视指定的 JSON 文件，并在文件发生变化时自动重新加载。
>- `db.json`: 这是一个 JSON 文件的文件路径，包含了模拟的 REST API 数据。JSON Server 将使用这个文件中的数据作为模拟的后端数据库。
>- 这个命令的作用是启动一个本地 REST API 服务器，该服务器模拟了一个后端数据库，并且会监视 `db.json` 文件的变化，以便在文件发生修改时重新加载数据。这对于前端开发中进行接口测试和开发调试时非常有用，因为它提供了一个轻量级的方式来模拟后端 API，而无需实际的后端服务器。
>
>如果不使用 `--watch` 选项，JSON Server 将在启动时加载一次 `db.json` 文件的数据，但不会监视文件的变化。这意味着，如果在服务器运行期间对 `db.json` 文件进行了更改，这些更改将不会自动反映在运行的服务器中。
>
>使用 `--watch` 选项的主要优势在于，它使得 JSON Server 能够实时监视 `db.json` 文件的变化，并在文件保存时自动重新加载数据。这对于开发调试和实时更新模拟数据非常方便，特别是在前端开发中需要频繁更改和测试接口的情况下。
>
>如果你只需一次性加载数据，而不关心在服务器运行期间对 `db.json` 文件进行的更改，那么可以省略 `--watch` 选项，JSON Server 将在启动时加载一次数据，然后等待请求。

操作类型：增、删、改、查

>`json-server` **查询数据**需要使用 `GET` 方法。
>
>`json-server` **新增数据**需要使用 `POST` 方法。
>
>**需要注意的是：**`json-server` 默认情况下并不会限制你上传的数据格式和类型，所以需要你严格遵循自己设计的数据格式来添加和修改。
>
>`json-server` **删除数据**需要使用 `DELETE` 方法。
>
>删除的公式是：http://localhost:3000/{接口名}/{id}
>
>**需要注意的是：** 删除成功 `Status` 会返回 `200`；如果删除的数据不存在会返回 `404`。

###### important:

>修改数据分为2个方法：
>
>- `put` ：覆盖
>
>- `patch` ：更新
>
>  公式如下所示：http://localhost:3000/posts/{id}
>
>  注意：原本的数据包含 `title` 和 `author` ，使用 `put` 时必须把这两个字段都写上，不然会删掉没传的字段。这就是 **“覆盖”** 的意思。

>查询：
>
>单一条件查询
>
>多条件查询 ：且（&&） 或（&）
>
>分页查询：使用 `_page` 和 `_limit`(可选) 对数据进行分页。需要注意，`_page` 和 `_limit` 前面都要有**下划线**。
>
>- `_page`：页码
>- `_limit`：每页的数据量
>
>排序查询：需要添加 **排序的标记 ( `_sort` )**，然后设置 **排序规则 ( `_order` )**。
>
>其中，排序规则有 **升序 ( `asc` )** 和 **降序 ( `desc` )** 。
>
>http://localhost:3000/{接口名}?_sort=要排序的字段名&_order=排序规则
>
>多字段排序：
>
>首先按 `postId` 升序排列，在 `1` 的基础上再对 `id` 进行倒序排列
>
>http://localhost:3000/comments?_sort=postId,id&_order=asc,desc
>
>切片查询：切片的意思是指定 **头** 和 **尾** ；也可以指定 **头** 和 **片段长度** 。
>
>用到的关键字有：
>
>- `_start`：开始位置（下标，从0开始）
>- `_end`：结束位置
>- `_limit`：片段长度
>
>范围查询：范围查询包括 **大于等于**、**小于等于**、**不等于** 三种情况。
>
>#### 大于等于 _gte
>
>#### 小于等于 _lte
>
>#### 不等于 _ne
>
>模糊查询：模糊查询的关键字是 `_like`。
>
>全文查询：全文查询的关键字是 `q`

>### 外键关联查询
>
>### 配置路由
>
>### 关系拼装
>
>其中有2种查询关系：
>
>- 包含子资源 `_embed`
>- 包含父资源 `_expand`