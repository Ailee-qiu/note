### useState的惰性初始化

>useState的惰性初始化是指可以将初始状态的值作为函数传递给useState的初始参数，而不仅仅是传递一个静态的初始值。当初始参数是一个函数时，函数将在组件的初始渲染阶段被调用，且函数的返回值将作为初始状态的值。

````js
const [count, setCount] = useState(() => {
  // 惰性初始化，函数会在初始渲染阶段调用
  return expensiveInitialValueCalculation();
});
````

>当传递函数作为初始参数时，它会在组件的初始渲染阶段只执行一次，并且不会随后再次执行。这在需要执行复杂计算或依赖其他值的情况下特别有用，可以避免在每次组件重新渲染时都执行昂贵的计算。
>
>如果在useState中传递一个函数，会导致每次组件重新渲染时都会执行该函数，而不是只在初始渲染阶段执行一次。这可能会导致不必要的性能问题和副作用。

下面是一个错误的示例，展示了在useState中传递函数引发的问题：

````js
const [count, setCount] = useState(expensiveFunction()); // 错误的写法
````

为了解决这个问题，可以通过将函数作为参数传递给useState的初始值，实现惰性初始化的效果。这样可以确保函数只在初始渲染阶段执行一次。

````js
const [count, setCount] = useState(() => expensiveFunction()); // 正确的写法
````

通过使用惰性初始化的方式，可以避免不必要的函数执行，并确保在组件的初始渲染阶段执行昂贵的计算或依赖其他值的逻辑。

